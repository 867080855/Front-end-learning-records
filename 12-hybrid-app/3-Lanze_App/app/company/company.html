<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="../../js/mui.min.js"></script>
    <link href="../../css/mui.min.css" rel="stylesheet"/>
    <style>
	    .bb-profile{
	    	margin-bottom: 6.66px;
	    }
    	.b-profile{
    		margin-top: 6.66px;
    	}
    	.profile{
    		padding: 0;
    		padding-left: 6.66px;
    		display: inline-block;
    		font-weight: 700;
    		color: #626262;
    	}
    	.gonsjianjie {
    		text-indent: 2em;
    	}
    	.pro1{
    		width: 16px;
    		height: 13px;

    	}
    	.pro2{
    		width: 16px;
    		height: 18px;
			vertical-align:middle;
    	}
    	/*正在招聘的公司*/
    	.comp{
			font-size: 14px;
			color: #323232;
    	}
    	span{
    		
    	}
    	.opero{
    		padding-top: 12px;
    		display: inline-block;
    		font-size: 12px;
    	}
    	
    	
    	.mui-table-view-cell:after {
    		/*left:0;*/
    		height:0;
    	}
    	
   
    	.gonsjianjie {
    		text-indent: 2em;
    		/*height : 300px;*/
    		/*transition: all 1s;*/
    	}
    	.content-hide {
    		height : 220px;
    		/*transition: all 1s;*/
    	}
    	
    	
    </style>
    <script type="text/javascript" >
      	mui.init();
    </script>
</head>
<body>
	<header id="header" class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">企业详情</h1>
	</header>
<div class="mui-content">
<!--轮播图-->
		<div class="mui-slider">
		    
		    <div class="mui-slider-group mui-slider-loop" id="slider">
		    	
		    </div> 
		
		</div>  	
</div>  	
	
	
	<ul class="mui-table-view"> 
        <li class="mui-table-view-cell ">
            
            <div class="gongsimigncheng" style="text-align: center;">
              	<!--青岛兴邦厨具有限公司-->
            </div>
        </li>
        
         <li class="mui-table-view-cell">
            
            <div class="mui-collapse-content gongzhng" style="text-align: center;">
         		 <!--股份制企业 | 青岛-->
            </div>
        </li>
        
    </ul>
<ul class="mui-table-view bb-profile"> 
	
        <li class="mui-table-view-cell b-profile">
            <!--修改公司简介-->
            <img class="pro1" src="image/pro1.png" alt="" />
            <div class="profile " >
        	     公司简介
            </div>
        </li>
</ul>	
<li class="mui-table-view-cell" style="padding-bottom:0;list-style: none;background-color: #fff;;">
            <div class="gonsjianjie content-hide" style="z-index: 0;position: relative;font-size:12px;">

            </div>
		  	<div class="show-btn"style="text-align:center;background-color:#fff;padding:0;margin:0;margin-left:-15px;margin-right:-15px;line-height:40px;height:40px;border:1px solid #efefef;position: relative;bottom:0;left:0;font-size: 12px;">展开信息</div>
</li> 

 
<!--添加“正在招聘”-->
<li class="mui-table-view-cell " style="list-style: none;background-color: #fff;">
    <!--修改公司简介-->
    <img class="pro2" src="image/pro2.png" alt="" />
    <div class="profile" >
	     该企业正在招聘职位
    </div>
</li>
<ul class="mui-table-view uilist">
   
   
   
</ul> 
 
</body> 

<script>
	var gonsjianjie = document.querySelector('.gonsjianjie');
	var showbtn = document.querySelector('.show-btn');
	text_flag = true;
	showbtn.onclick = function(){
		if(text_flag){
			gonsjianjie.classList.toggle('content-hide');
			this.innerHTML = '折叠信息';
			text_flag = false;
		}else {
			gonsjianjie.classList.toggle('content-hide');
			this.innerHTML = '展开信息';
			text_flag = true;
		}
	}

	document.addEventListener( "plusready",  function(){
			// 轮播图
		var cid = localStorage.getItem('cid');
				
	        mui.ajax($$$.siturl+'m=App&c=index&a=companyfile&cid='+cid,{
				type:'get',
				success:function(data){
					var jsons=JSON.parse(data);
					var sliderbox = document.querySelector('#slider');
					var jobs=jsons.jobs;	
					var reslut="";
					 
//					for(var i=0;i< jobs.length;i++ ){
//						
//						reslut+='<li class="mui-table-view-cell mui-media li_togo_next" id="'+jobs[i].jid+'">';
//						reslut+='<a href=":;">';
//						reslut+=' <img class="mui-media-object mui-pull-left" src="'+$$$.imgurl+jobs[i].logo+'" style="height: 3.2em;width:3.3em;border-radius: 3px;margin-top: .4em;max-width: none;">';	
//						reslut+=' <div class="mui-media-body">';	
//						reslut+='<p class="mui-ellipsis" style="color: #8f8f94;">' + jobs[i].companyname + ' </p>';	
//						reslut+='<span class="mui-ellipsis; " style="color: #8f8f94;">'+jobs[i].category_cn+'</span><span class="mui-ellipsis mui-pull-right" style="color: #8f8f94;">'+jobs[i].minwage+'-'+jobs[i].maxwage+'元</span>';	
//						reslut+='<p class=""></p><span style="color: #8f8f94;" class="mui-ellipsis">全请将</span><span style="color: #8f8f94;" class="mui-ellipsis mui-pull-right">'+jobs[i].district_cn+'</span>';	
//						reslut+='</div>';	
//						reslut+='</a>';
//						reslut+='</li>';												
//					
//					}
					
					
					for(var i=0;i< jobs.length;i++ ){	
						
						var tags = jobs[i].tag_cn.split(',');
			            var leng=0;
			            if(tags.length>3){
			                leng=3;
			
			            }else{
			                leng=tags.length;
			            }
			            var srce='';
			            for (var x=0; x <leng; x++) {
			                // alert(tags[i]);
			                srce+='<span style="font-size:12px;line-height: 12px;height:18px;padding:2px 0;box-sizing: border-box;display: inline-block;text-align: center;border:1px solid #5CA8FC;border-radius: 5px;color:#5CA8FC;margin-right:3px;">';
			                srce+=tags[x]+'</span>';
			            }

						reslut+='<li class="mui-table-view-cell mui-media li_togo_next" style="border-bottom:1px solid #efefef;" id="'+jobs[i].jid+'">';
						reslut+='<a href=" ">';
							reslut+=' <div class="mui-media-body" style="">';	
								// 公司名称 + 薪资
								reslut+='<span class="mui-ellipsis" style="color: #8f8f94;color:#000;font-size:15px;font-weight:700;">' + jobs[i].jobs_name + ' </span><span class="mui-ellipsis mui-pull-right" style="color: #EB793B;">'+jobs[i].minwage+'-'+jobs[i].maxwage+'元</span>';	
								
								
								
								// 第二行工种 + 地区 + 小标签
								reslut+='<p class=""><span class="mui-ellipsis; " style="color: #737373;">'+jobs[i].category_cn+'</span><span style="margin-left:20%;" class="mui-ellipsis">'+srce+'</span><span style="color: #000;font-size:13px;" class="mui-ellipsis mui-pull-right" >'+jobs[i].district_cn+'</span></p >';
								
								
							reslut+='</div>';	
						reslut+='</ a>';
						reslut+='</li>';													
					}
					
					

					
					document.querySelector('.uilist').innerHTML=reslut; 					
					//点击事件
					var alist=document.querySelectorAll('.li_togo_next');					
					for (var i=0;i< alist.length;i++){							
						alist[i].addEventListener('click',function(e){
							e.preventDefault();
								localStorage.setItem("jid", this.getAttribute('id'));
								//localStorage.getItem("jid");
								mui.openWindow({
								    url: '../job/job.html',  
								    id:localStorage.getItem("jid")
								  });
							e.stopPropagation();
						}) 
					}
					
					
					//alert(JSON.stringify(jsons.data));
					
					document.querySelector('.gongsimigncheng').innerHTML=jsons.data.companyname;
					document.querySelector('.gongzhng').innerHTML=jsons.data.nature_cn+'|'+jsons.data.scale_cn+'|'+jsons.data.district_cn; 
					document.querySelector('.gonsjianjie').innerHTML=jsons.data.contents; 
					//document.querySelector('.qiyexinxi-li').innerHTML=jsons.data.nature_cn+'|'+jsons.data.scale_cn+'|'+jsons.data.district_cn; 
					//document.querySelector('.gongsimingchneg-li').setAttribute('data-id',jsons.data.cid);
//					document.querySelector('.gongsimingchneg-li').addEventListener('click',function(e){
//						e.preventDefault();
//						var cid=this.getAttribute('data-id');
//							localStorage.setItem("cid", cid);
//						mui.openWindow({
//						    url:'../company/company.html',
//						    id:'company',
//						})
//						e.stopPropagation();
//					});
					//轮播图
					var result = '';
	               
	                function lunbotu(jsons){
	                	var result = '';
		                var tar = jsons;
		                //(JSON.stringify(tar));
		                var url = $$$.imgurl;
		                result  += '<div class="mui-slider-item"><a href="#"><img style="height:140px;" src="'+ url + tar[tar.length -1 ] +'" /></a></div>';
						result  += '<div class="mui-slider-item"><a href="#"><img style="height:140px;" src="'+ url + tar[0] +'" /></a></div>';
		                for(var x = 1; x < tar.length-1; x++){
							result  += '<div class="mui-slider-item"><a href="#"><img style="height:140px;" src="'+ url + tar[x] +'" /></a></div>';
						}
	                	result  += '<div class="mui-slider-item"><a href="#"><img style="height:140px;" src="'+ url + tar[tar.length -1 ] +'" /></a></div>';
	                	result  += '<div class="mui-slider-item"><a href="#"><img style="height:140px;" src="'+ url + tar[0] +'" /></a></div>';
		                sliderbox.innerHTML = result;
		                
		                // 创建轮播图对象
		                var gallery = mui('.mui-slider');
						gallery.slider({
						  interval:0  //自动轮播周期，若为0则不自动播放，默认为0；
						});
	                }
	                
	                lunbotu(jsons.img);
	           }    
			});
			
			
			
			
			
	},true);
</script>

</html>
